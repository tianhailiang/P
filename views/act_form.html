<!DOCTYPE html>
<html lang="en">
{% include "header_new.html" %}
 <!--[if lt IE 9]>
  <script src="{{helper.cdnhost}}/assets/js/upgrade.js"></script>
  <![endif]-->
<link rel="stylesheet" href="{{helper.cdnhost}}/assets/css/about.css">
<style>
 .act_form {
   width: 1120px;
   background: #ffffff;
   margin: 0 auto;
   margin-top: 20px;
 }
 .act_form_con_2 label{
   font-weight: normal;
   margin-right: 155px;
   margin-top: 10px;
 }
 .act_form_con label{
   font-weight: normal;
   margin-left: 40px;
   margin-right: 110px;
   margin-top: 10px;
 }
 .act_form_con_3 label{
   font-weight: normal;
   margin-left: 50px;
   margin-right: 130px;
   margin-top: 10px;
 }

 input[type="radio"]:checked+label {color: red;}

 .act_form_con input[type="radio"] + label:before {
   content: "\a0"; /*不换行空格*/
   display: inline-block;
   vertical-align: middle;
   font-size: 18px;
   width: 14px;
   height: 14px;
   margin-right: 10px;
   border-radius: 50%;
   border: 1px solid #958c87;
   font-weight: normal;
   line-height: 1;

 }

 .act_form_con input[type="radio"]:checked + label:before {
   content: "\a0"; /*不换行空格*/
   display: inline-block;
   vertical-align: middle;
   font-size: 18px;
   width: 10px;
   height: 9px;
   margin-right: 10px;
   border-radius: 50%;
   border: 1px solid #d31d2c;
   background-color: #d31d2c;
   background-clip: content-box;
   padding: 2px;
   color: #d31d2c;
 }

 .act_form_con_2 input[type="radio"]:checked+label, .act_form_con_2 label {color: #fff;}
 .act_form_con_2 input[type="radio"] + label:before {
   content: "\a0"; /*不换行空格*/
   display: inline-block;
   vertical-align: middle;
   font-size: 18px;
   width: 14px;
   height: 14px;
   margin-right: 10px;
   border-radius: 50%;
   border: 1px solid #fff;
   font-weight: normal;
   line-height: 1;

 }

 .act_form_con_2 input[type="radio"]:checked + label:before {
   content: "\a0"; /*不换行空格*/
   display: inline-block;
   vertical-align: middle;
   font-size: 18px;
   width: 10px;
   height: 9px;
   margin-right: 10px;
   border-radius: 50%;
   border: 1px solid #fff;
   background-color: #fff;
   background-clip: content-box;
   padding: 2px;
   color: #d31d2c;
 }

 .act_form_con_3 input[type="radio"]:checked+label, .act_form_con_3 label {color: #fff;}
 .act_form_con_3 input[type="radio"] + label:before {
   content: "\a0"; /*不换行空格*/
   display: inline-block;
   vertical-align: middle;
   font-size: 18px;
   width: 14px;
   height: 14px;
   margin-right: 10px;
   border-radius: 50%;
   border: 1px solid #fff;
   font-weight: normal;
   line-height: 1;

 }

 .act_form_con_3 input[type="radio"]:checked + label:before {
   content: "\a0"; /*不换行空格*/
   display: inline-block;
   vertical-align: middle;
   font-size: 18px;
   width: 10px;
   height: 9px;
   margin-right: 10px;
   border-radius: 50%;
   border: 1px solid #fff;
   background-color: #fff;
   background-clip: content-box;
   padding: 2px;
   color: #d31d2c;
 }

 input[type="radio"] {
   position: absolute;
   clip: rect(0, 0, 0, 0);
 }
  .act_form_con {
    width: 1180px;
    height: 40px;
  }
#gerenjieshao {
  width: 1052px;
  margin: 30px 30px 60px 30px;
  height: 188px;
  background: #f8f8f8;
  border: 0;
}
  .act_form_xian {
    width: 1090px;
    height: 1px;
    border-bottom:1px solid #C13232 ;
    border-top:1px solid #C13232;
    margin: 0 10px;
  }
 .word-num {
   position: absolute;
   right: 55px;
   top: 188px;
   z-index: 100;
   color: #666;
 }
 .word-num span{
   color: #c13232;
 }
 .attachment_box{
   padding: 30px 10px;
 }
  .attach_upload_btn{
    width: 175px;
    height: 175px;
    border: 1px solid #C13232;
    background-color: #f8f8f8;
    text-align: center;
    line-height: 50px;
    float: left;
  }
 .attach_upload_btn i {
   font-size: 50px;
   color: #C13232;
   display: block;
   margin-top: 60px;
 }
  .attach_item {
    width: 900px;
    height: 50px;
    line-height: 50px;
    float: left;
    margin-left: 20px;
    color: #333;
    font-size: 14px;
  }
  .act_form_ing {
    width: 1180px;
    height: 40px;
    background: red;
    margin-top: 22px;
  }
  .content_title_bbb {
    position: relative;
  }
  .act-form-btn{
  	display: block;
  	width:400px;
  	height:40px;
  	text-align:center;
  	line-height: 40px;
  	font-size: 18px;
  	color:#fff;
  	background:#c13232;
  	border-radius: 5px;
  	position: absolute;
  	left:50%;
  	margin-left: -200px;
  	cursor: pointer;
  }
  .act_form_tu {
    width:100%;
    height:auto;
    background-image: url({{helper.cdnhost}}/assets/img/zhuanxiang.png);padding-top: 300px;background-repeat: no-repeat;background-size: 100% auto;
  }
  h1 {
    font-size: 18px
  }
  .act_form_biaoti {
    width: 16px;
    margin-top: 5px;
    margin-right:8px;
    height: 20px;
    background: #C13232;
    float: left;
  }
.act_form_diye {
  width:100%;
  height:60px;
  background-image: url({{helper.cdnhost}}/assets/img/diditu.png);background-repeat: no-repeat;background-size: cover;text-align: center;line-height: 60px;color: #fff;font-size: 14px;
}
</style>
<!--<link rel="stylesheet" href="{{helper.cdnhost}}/assets/css/widget/academy3.css"/>-->
<script>
  var AD_PAGE_NAME = "PROFILE";
</script>
<script src="{{helper.cdnhost}}/assets/js/show_advert.js"></script>
<body>
  {% include "widget/top/top.html" %}
  {% import "widget/new_nav_first/common_nav.html" as common_nav %}
  {{ common_nav.common_nav(tdk,helper) }}
  <div class="clearfix act_form_tu" >
  <div class="act_form clearfix">
    <img style="display:block;" src="{{helper.cdnhost}}/assets/img/bioadantiaojiao.png" alt="">
    <h1 style="margin-top: 40px;">
      <div class="act_form_biaoti">
      </div>建议类型
    </h1>
    <div class="act_form_xian"></div>
    <div class="act_form_con clearfix">
      <input  type="radio" name="payMethod" value="1" id="liu1" />&nbsp;&nbsp;&nbsp;&nbsp;<label for="liu1">技术相关</label>
      <input  type="radio" name="payMethod" value="2" id="liu2"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label for="liu2">市场营销</label>
      <input  type="radio" name="payMethod" value="3" id="liu3"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label for="liu3">管理体系</label>
      <input  type="radio" name="payMethod" value="4" id="liu4"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label for="liu4">薪酬体系</label>
      <input  type="radio" name="payMethod" value="5" id="liu5"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label style="margin-right: 0;margin-left: 0;" for="liu5">人力资源</label>
  </div>

<div class="act_form_con_2 clearfix act_form_con_child" style="background:url({{helper.cdnhost}}/assets/img/act_back.png);background-size:cover;height: 50px;line-height: 38px;display: none;">
  <input  type="radio" name="pay1" value="11" id="liu-1-1"/>&nbsp;&nbsp;&nbsp;&nbsp;<label for="liu-1-1">技术缺陷</label>
  <input  type="radio" name="pay1" value="12" id="liu-1-2"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label class="act_form_label" for="liu-1-2">机制建议</label>
  <input type="radio" name="pay1" value="13" id="liu-1-3"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label for="liu-1-3">ui设计</label>
  <input  type="radio" name="pay1" value="14" id="liu-1-4"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label for="liu-1-4">页面排版</label>
  <input type="radio" name="pay1" value="15" id="liu-1-5"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label style="margin-right: 0" for="liu-1-5">技术优化</label>
</div>

<div class="act_form_con_3 clearfix act_form_con_child" style="background:url({{helper.cdnhost}}/assets/img/act_back1.png);background-size:cover;height: 50px;line-height: 38px;display: none;">
  <input  type="radio" name="pay2" value="21" id="liu-2-1"/>&nbsp;&nbsp;&nbsp;&nbsp;<label for="liu-2-1">交互设计</label>
  <input  type="radio" name="pay2" value="22" id="liu-2-2"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label class="act_form_label" for="liu-2-2">专题设计</label>
  <input type="radio" name="pay2" value="23" id="liu-2-3"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label for="liu-2-3">营销文案策划</label>
  <input  type="radio" name="pay2" value="24" id="liu-2-4"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label for="liu-2-4">前端设计</label>
</div>
  <div>
    <h1 style="margin-top: 40px"><div class="act_form_biaoti"></div>问题简述</h1>
    <div class="act_form_xian"></div>
  </div>
  <div class="content_title_bbb clearfix">
    <textarea id="gerenjieshao" maxlength="500" data-geren="{{userinfo.introduce}}"></textarea>
    <div class="word-num">还可以输入<span id="word-num">120</span>字</div>
  </div>


  <div>
    <h1><div class="act_form_biaoti"></div>上传建议附件</h1>
    <div class="act_form_xian"></div>
    <div class="attachment_box clearfix">
      <form id="attachmentForm" style="display: none;">
        <input id="attachment" type="file" multiple="multiple" name="attachment"/>
      </form>
      <label for="attachment" class="attach_upload_btn"><i class="iconfont">&#xe616;</i></label>
      <div class="attach_item"></div>
    </div>
  </div>
  <div style="position: relative;height:40px;margin-top: 10px;margin-bottom: 40px;">
  	<span class="act-form-btn">提交建议</span>
  </div>
</div>
    <div class="act_form_diye"style="">点击此处查看招聘职位<i class="iconfont" style="padding: 0 5px;">&#xe636;</i><a href="http://special.zhaopin.com/bj/2015/jjl032714/job2.html?deptid=112034331" style="font-size: 20px;color: #fff;;">虚位以待</a></div>
{% import "widget/new_slide/new_slide.html" as  slide %}
{{slide.leyu_slide("AD_FEEDBACK_SEAT10",helper) }}
<script src="{{helper.cdnhost}}/assets/js/nav_common.js"></script>
<script src="{{helper.cdnhost}}/assets/js/footer.js"></script>
<!--<script src="{{helper.cdnhost}}/assets/js/common.js" ></script>-->
<script src="{{helper.cdnhost}}/assets/js/online_evaluation.js" ></script>
<script src="{{helper.cdnhost}}/assets/js/slide.js"></script>
<script src="{{helper.cdnhost}}/dep/js/layer.min.js"></script>
<script src="{{helper.cdnhost}}/assets/js/attachment.js"></script>
<script>
  $(function () {
    var login_ss = null;
    if($.cookie('login_ss') != undefined){
      login_ss = JSON.parse($.cookie('login_ss'));
    }
    $("#gerenjieshao").on("keyup",function(){
	  var strLength = $.trim($(this).val()).length;
	  $("#word-num").html(80-strLength);
	  if(strLength > 80){
	    $("#word-num").html(0);
	    this.value  = this.value.substring(0, 80);
	  }
	});
    $("#liu1").on('click', function(){

     	$('.act_form_con_3').css("display", "none");
		$('.act_form_con_2').css("display", "block");
	})
    $("#liu2").on('click', function(){
    	$('.act_form_con_2').css("display", "none");
		$('.act_form_con_3').css("display", "block");
	})
  	$("#liu3").on('click', function(){
    	$('.act_form_con_2').css("display", "none");
		$('.act_form_con_3').css("display", "none");
	})
  	$("#liu4").on('click', function(){
    	$('.act_form_con_2').css("display", "none");
		$('.act_form_con_3').css("display", "none");
	})
  	$("#liu5").on('click', function(){
    	$('.act_form_con_2').css("display", "none");
		$('.act_form_con_3').css("display", "none");
	})
  	
	$("#gerenjieshao").on("keyup",function(){
		var strLength = $.trim($(this).val()).length;
	    $("#word-num").html(80-strLength);
	    if(strLength > 80){
	      $("#word-num").html(0);
	      this.value  = this.value.substring(0, 80);
	    }
	});
	$("#gerenjieshao").on('focus',function(){
		if($.cookie('login_ss') == undefined){
		  getlogin();
  	      return false;
		}
	});
	
    var params = {
      uid:Math.floor(Math.random() * 999999),
      maxfileNum:1,
      fileInput: $("#attachment").get(0),
      url: ajaxUrlPrefix.nodeapi + "/cmsapi/input_upload",
      filter: function(files) {
        console.log('filter');
        if(files.length > ZXXFILE.maxfileNum){
          layer.msg('最多上传'+ZXXFILE.maxfileNum+'个文件');
          return false;
        }
        var arrFiles = [];
        for (var i = 0, file; file = files[i]; i++) {
          var mSize = 10*1024*1024;
          if (file.size >=  mSize) {
            $('.attach_item').text('您的文件应小于10M');
            return false;
          }
          else {
            arrFiles.push(file);
          }
        }
        return arrFiles;
      },
      onSelect: function(files) {
        $('.attach_item').text('附件正在上传……');
      },
      onSuccess: function(file, response) {
        var res = JSON.parse(response);
        if (res.errno === 0) {
          $('.attach_item').text(res.data[0])
        } else {
          $('.attach_item').text('上传失败，请重新上传')
        }
      },
      onFailure: function(file) {
        $('.attach_item').text('上传失败，请重新上传')
      }
    };
    ZXXFILE = $.extend(ZXXFILE, params);
    ZXXFILE.init();
    $(".act-form-btn").on('click',function(){
    	var type_id = $('.act_form_con input[name="payMethod"]:checked').val();
    	// console.log(type_id)
    	var child_id =$(".act_form_con_child").eq(type_id-1).find('input[name="pay'+type_id+'"]:checked').val();
    	// console.log(child_id)
    	if($("#gerenjieshao").val()==''){
    		layer.msg("请填写问题描述");
          	return false;
    	}
    	$.ajax({
	        url: '/save_feedback',
	        type:'POST',
	        data:{
	            uid:login_ss.uid,
	            phone:login_ss.username,
	            nickname:login_ss.nickname,
	            type_id:type_id,
	            child_id:child_id,
	            description:$("#gerenjieshao").val(),
	            file_url: $('.attach_item').text()
	        },
	        dataType:'json',
	        async: false,
	        success:function(result){
	            console.log(result)
	            if(result.code == 0){
	            	layer.msg('提交成功')
	            	window.setTimeout(function(){
                    	window.location.reload();
                	},1000);
	            }else{
	              layer.msg('系统繁忙，请稍后重试')
	            }
	        },
	        error:function(XMLHttpRequest, textStatus, errorThrown){
	            console.log(errorThrown)
	        }
	    });

    });
   
  })
</script>
</body>
</html>